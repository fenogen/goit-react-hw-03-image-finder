{"version":3,"sources":["components/ImageSearch/Button/Button.module.css","components/ImageSearch/Modal/Modal.module.css","api/ApiSearchImage.js","components/ImageSearch/Searchbar/Searchbar.js","components/ImageSearch/ImageGallery/ImageGalleryItem.js","components/ImageSearch/ImageGallery/ImageGallery.js","components/ImageSearch/Button/Button.js","components/ImageSearch/Modal/Modal.js","components/ImageSearch/ImageSearch.js","App.js","index.js","components/ImageSearch/Searchbar/Searchbar.module.css","components/ImageSearch/ImageGallery/ImageGallery.module.css"],"names":["module","exports","API","getImage","page","search","axios","get","then","responce","data","hits","Searchbar","fnSearch","className","style","SearchForm","onSubmit","e","preventDefault","target","lastChild","value","type","SearchForm__button","SearchForm__button_label","SearchForm__input","placeholder","ImageGalleryItem","src","srcLarge","data-img","alt","ImageGalleryItem__image","ImageGallery","fnCatchSrc","event","props","fnModalOpen","dataset","img","onClick","this","collection","map","item","webformatURL","largeImageURL","id","Component","Button","fnLoadMore","Button__container","Modal","fnCloseEscape","code","fnTogleModal","fnCloseBackdrop","nodeName","window","addEventListener","removeEventListener","modal__backdrop","modal__content","children","ImageSearch","state","currentPage","error","loader","showModal","fnGetCollection","console","log","setState","api","catch","warn","inputValue","prevState","imgLarge","prevProps","scrollTo","top","document","documentElement","scrollHeight","behavior","length","color","height","width","marginLeft","transform","marginTop","timeout","position","left","App","React","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bece9b25.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button__container\":\"Button_Button__container__l3Nrq\",\"Button\":\"Button_Button__fakI-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal__backdrop\":\"Modal_modal__backdrop__1OU-l\",\"modal__content\":\"Modal_modal__content__qUdJT\"};","import axios from 'axios'\r\n\r\nconst API = {\r\n    key: '20057586-194248245024f7fdf6233c620',\r\n    page: 1,\r\n    onPage: 12,\r\n    search: '',\r\n}\r\n\r\nconst getImage = (page, search) => {\r\n    return axios.get(`https://pixabay.com/api/?image_type=photo&key=${API.key}&page=${page}&per_page=${API.onPage}&orientation=horizontal&q=${search}`).then(responce => responce.data.hits);\r\n}\r\n\r\nexport { getImage }\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport style from './Searchbar.module.css';\r\n\r\nfunction Searchbar({fnSearch}) {\r\n\r\n  const fnSubmit = (e) => {\r\n    e.preventDefault()\r\n    fnSearch(e.target.lastChild.value)\r\n  }\r\n\r\n\r\n  return (\r\n    <header className={style.Searchbar}>\r\n      <form\r\n        className={style.SearchForm}\r\n      onSubmit={fnSubmit}>\r\n        <button\r\n          type=\"submit\"\r\n          className={style.SearchForm__button}>\r\n          <span className={style.SearchForm__button_label}>Search</span>\r\n        </button>\r\n        <input\r\n          className={style.SearchForm__input}\r\n          type=\"text\"\r\n          // autocomplete=\"off\"\r\n          // autofocus\r\n          placeholder=\"Search images and photos\"\r\n          // value={}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  fnSearch: PropTypes.func,\r\n}\r\n\r\nexport default Searchbar;\r\n\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport style from './ImageGallery.module.css';\r\n\r\nfunction ImageGalleryItem({ src, srcLarge }) {\r\n    return (\r\n        <li className={style.ImageGalleryItem}>\r\n            <img\r\n                src={src}\r\n                data-img={srcLarge}\r\n                alt=\" \"\r\n                className={style.ImageGalleryItem__image} />\r\n        </li>\r\n    )\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n    src: PropTypes.string,\r\n    srcLarge: PropTypes.string,\r\n}\r\n\r\nexport default ImageGalleryItem\r\n\r\n","import React, { Component } from 'react';\r\nimport style from './ImageGallery.module.css';\r\n\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\n\r\nclass ImageGallery extends Component {\r\n\r\n  fnCatchSrc = (event) => {\r\n    this.props.fnModalOpen(event.target.dataset.img);\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        <ul className={style.ImageGallery}\r\n          onClick={this.fnCatchSrc}>\r\n          {this.props.collection.map(item => (\r\n            <ImageGalleryItem\r\n              key={item.id}\r\n              src={item.webformatURL}\r\n              srcLarge={item.largeImageURL}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport style from './Button.module.css';\r\n\r\nfunction Button({fnLoadMore}) {\r\n  return (\r\n    <div className={style.Button__container}>\r\n          <button\r\n              onClick={fnLoadMore}\r\n              className={style.Button}\r\n              type=\"button\">\r\n        Load more\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nButton.propTypes = {\r\n  fnLoadMore: PropTypes.func,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react'\r\nimport style from './Modal.module.css';\r\n\r\n\r\n\r\nexport default class Modal extends Component {\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.fnCloseEscape);\r\n    }\r\n\r\n    componentWillUnmount() { \r\n        window.removeEventListener('keydown', this.fnCloseEscape);\r\n    }\r\n\r\n    fnCloseEscape = (event) => {\r\n        if (event.code === 'Escape') {\r\n            this.props.fnTogleModal();\r\n        }\r\n    }\r\n\r\n    fnCloseBackdrop = (event) => {\r\n        // if (event.target === event.curentTarget) {   //----> Не срабатывает\r\n        if (event.target.nodeName !== \"IMG\" ) {\r\n            this.props.fnTogleModal();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={style.modal__backdrop}\r\n            onClick={this.fnCloseBackdrop}>\r\n                <div className={style.modal__content}>{this.props.children}</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport * as api from '../../api/ApiSearchImage';\r\n\r\nimport Searchbar from './Searchbar/Searchbar';\r\nimport ImageGallery from './ImageGallery/ImageGallery';\r\nimport Button from './Button/Button';\r\nimport Modal from './Modal/Modal';\r\n\r\n\r\nclass ImageSearch extends Component {\r\n  state = {\r\n    collection: [],\r\n    search: '',\r\n    currentPage: 1,\r\n    error: null,\r\n    loader: false,\r\n    showModal: false,\r\n    srcLarge: '',\r\n  };\r\n\r\n  // --------------------------------------------> Ф-я запуска поиска после обновления search в State:\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.search !== this.state.search) {\r\n      console.log('Ф-я загрузки(№1)');\r\n      this.fnGetCollection();\r\n    }\r\n\r\n    if (\r\n      prevState.currentPage !== this.state.currentPage &&\r\n      prevState.search === this.state.search\r\n    ) {\r\n      console.log('Ф-я Дозагрузки(№2)');\r\n      this.fnGetCollection();\r\n    }\r\n\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n\r\n  // --------------------------------------------> Ф-я запроса на бэкенд\r\n  fnGetCollection = () => {\r\n    console.log('Go to backend');\r\n    this.setState({\r\n      loader: true, //---> Включили Spiner\r\n    });\r\n    api\r\n      .getImage(this.state.currentPage, this.state.search)\r\n      .then(data => {\r\n        this.setState({\r\n          loader: false, //---> Выключили Spiner\r\n          collection: [...this.state.collection, ...data], //---> Распыляем что бы на экране было больше 12 фото после дозагрузки\r\n        });\r\n        console.log(this.state.collection);\r\n      })\r\n      .catch(() => console.warn('Server communication error'));\r\n  };\r\n\r\n  // --------------------------------------------> Ф-я извлечения значения инпута и запись его в State\r\n  fnSearch = inputValue => {\r\n    console.log(`I am ready for search \"${inputValue}\"`);\r\n    this.setState({\r\n      search: inputValue,\r\n      currentPage: 1, //---> Сбросили для дозагрузки\r\n      error: null, //---> Сбросили для дозагрузки\r\n      collection: [], //---> Сбросили для дозагрузки\r\n    });\r\n  };\r\n\r\n  // --------------------------------------------> Ф-я дозагрузки фотографий\r\n  fnLoadMore = () => {\r\n    console.log(`Load More \"${this.state.search}\"`);\r\n    this.setState(prevState => ({\r\n      currentPage: prevState.currentPage + 1,\r\n    }));\r\n  };\r\n\r\n    // --------------------------------------------> Ф-я открытия модального окна\r\n  fnModalOpen = imgLarge => {\r\n    console.log('Modal Open');\r\n    this.setState({\r\n      srcLarge: imgLarge,\r\n      showModal: true,\r\n    });\r\n  };\r\n\r\n  // --------------------------------------------> Ф-я закрытия модального окна\r\n\r\n  fnTogleModal = () => {\r\n    this.setState(prevState => ({\r\n      showModal: !prevState.showModal,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {/* ----------------------------Searchbar------------------------------- */}\r\n        <Searchbar fnSearch={this.fnSearch} />\r\n        {/* ----------------------------ImageGallery---------------------------- */}\r\n        {this.state.collection.length > 0 && (\r\n          <ImageGallery\r\n            collection={this.state.collection}\r\n            fnModalOpen={this.fnModalOpen}\r\n          />\r\n        )}\r\n        {/* ----------------------------Loader-1------------------------------- */}\r\n        {this.state.loader && this.state.collection.length === 0 ? (\r\n          <Loader\r\n            type=\"BallTriangle\"\r\n            color=\"#00BFFF\"\r\n            height={150}\r\n            width={150}\r\n            style={{\r\n              marginLeft: '50%',\r\n              transform: 'translate(-50px)',\r\n              marginTop: '15%',\r\n            }}\r\n            // timeout={3000} //3 secs\r\n          />\r\n        ) : null}\r\n        {/* ----------------------------Loader-2------------------------------- */}\r\n        {this.state.loader && this.state.collection.length > 0 ? (\r\n          <Loader\r\n            type=\"ThreeDots\"\r\n            color=\"#00BFFF\"\r\n            height={100}\r\n            width={100}\r\n            style={{\r\n              marginLeft: '50%',\r\n              transform: 'translate(-50px)',\r\n              marginTop: '2%',\r\n            }}\r\n            // timeout={3000} //3 secs\r\n          />\r\n        ) : null}\r\n        {/* ----------------------------Button------------------------------ */}\r\n        {this.state.collection.length > 0 && (\r\n          <Button fnLoadMore={this.fnLoadMore} />\r\n        )}\r\n        {/* ----------------------------Modal------------------------------- */}\r\n        {this.state.showModal && (\r\n          <Modal fnTogleModal={this.fnTogleModal}>\r\n            <Loader\r\n              type=\"BallTriangle\"\r\n              color=\"#00BFFF\"\r\n              height={150}\r\n              width={150}\r\n              timeout={1500} //2 secs\r\n              style={{\r\n                position: 'absolute',\r\n                top: '50%',\r\n                left: '50%',\r\n                transform: 'translate(-75px, -75px)',\r\n              }}\r\n            />\r\n              <img\r\n                src={this.state.srcLarge}\r\n                alt=\" \"\r\n            />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageSearch;\r\n","import React from \"react\";\r\n\r\nimport ImageSearch from './components/ImageSearch/ImageSearch'\r\nimport \"./App.css\";\r\n\r\nclass App extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <ImageSearch/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'modern-normalize/modern-normalize.css'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2wyrg\",\"SearchForm\":\"Searchbar_SearchForm__3hCF7\",\"SearchForm__button\":\"Searchbar_SearchForm__button__11dEv\",\"SearchForm__button_label\":\"Searchbar_SearchForm__button_label__1_Law\",\"SearchForm__input\":\"Searchbar_SearchForm__input__An71p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1yPDc\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__1CA4i\",\"ImageGalleryItem__image\":\"ImageGallery_ImageGalleryItem__image__3DscN\"};"],"sourceRoot":""}